import{j as e,r as y,P as D}from"./index-aea85b90.js";import{B as z}from"./Breadcrumb-36d57edb.js";import{P as W}from"./PageContainer-cdf59eb8.js";import{m as F}from"./mapbox-gl-50cf9b1b.js";import{D as N}from"./DashboardCard-b9cb4657.js";import{C as v,_ as B}from"./react-apexcharts.min-c37c62d3.js";import{B as k}from"./BlankCard-b0a455f2.js";import{u as j,B as x,T as g,G as m,O as Y,S as A,s as q,Y as G}from"./index.esm-70a918d3.js";import{C as w}from"./Chip-b6998e96.js";import{S as C}from"./Stack-10fb171d.js";import{A as E}from"./Avatar-22d95f36.js";import{b as $}from"./Button-021ea796.js";import{C as Z}from"./Card-0f775ac0.js";import{D as T}from"./Divider-57144c01.js";import"./CustomSelect-f91b0cb3.js";import"./Grow-26c1c19e.js";import"./ButtonBase-33b8aab6.js";import"./styled-d61d15ba.js";import"./dividerClasses-7eee61cf.js";const M=({title:t,value:r,chartData:a,stateName:i})=>{const c=j();c.palette.secondary.main;const s=o=>{if(o.length<2)return"0%";const u=o[o.length-2],n=o[o.length-1];return u===0?"N/A":`${((n-u)/u*100).toFixed(2)}%`},l=o=>`â‚¦${(o/1e9).toFixed(2)} B`,d=s(a),h={chart:{type:"bar",fontFamily:"'Plus Jakarta Sans', sans-serif;",foreColor:"#adb0bb",toolbar:{show:!1},height:200,sparkline:{enabled:!1}},colors:["#3B80B2","#599BC8","#77ADD2","#97BEDC","#B3CEE6","#e4e9ec","#e4e9ec","#e4e9ec","#b8c0c6"],plotOptions:{bar:{borderRadius:4,columnWidth:"50%",distributed:!0,endingShape:"rounded",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(o){return l(o)},position:"top",style:{fontSize:"12px",colors:[c.palette.mode==="dark"?"#fff":"#304758"],fontWeight:600},offsetY:-20},legend:{show:!1},grid:{yaxis:{lines:{show:!1}}},xaxis:{categories:["July","June","May","April"],labels:{show:!0,style:{fontSize:"10px"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{show:!1}},tooltip:{theme:c.palette.mode==="dark"?"dark":"light",y:{formatter:function(o){return l(o)}}},title:{text:"",align:"center",style:{fontSize:"12px",fontWeight:"bold",color:"#263238",padding:"10px"}}},f=[{name:"",data:a}];return e.jsx(k,{children:e.jsxs(v,{sx:{p:"30px"},children:[e.jsxs(x,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(g,{variant:"h5",children:t}),e.jsx(w,{label:i||"Select a state",size:"small"})]}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsxs(m,{item:!0,xs:12,children:[e.jsx(g,{variant:"h4",mt:3,fontWeight:600,children:r}),e.jsxs(C,{direction:"row",spacing:1,mt:1,alignItems:"center",children:[e.jsx(E,{sx:{bgcolor:"success.light",width:20,height:20},children:d.startsWith("-")?e.jsx(Y,{width:16,color:"#d32f2f"}):e.jsx(A,{width:16,color:"#39b69a"})}),e.jsx(g,{variant:"subtitle2",color:"textSecondary",children:d})]})]}),e.jsxs(m,{item:!0,xs:12,children:[e.jsx(g,{mb:2,variant:"subtitle2",whiteSpace:"nowrap",fontWeight:600,textAlign:"center",children:"Past Four Months"}),e.jsx(x,{mt:2,children:e.jsx(B,{options:h,series:f,type:"bar",height:"200px"})})]})]})]})})},b={"NG018.1":{name:"Jigawa North",revenueRequired:[3e9,325e7,35e8,375e7],revenueBilled:[275e7,3e9,325e7,38e8],collections:[215e7,23e8,245e7,26e8],vendorCollections:{"BuyPower.ng":10,"Banahim.net":20,Bank:30,Cash:40,POS:10,"powershop.ng":20,Remita:15},dailyPostPaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10),dailyPrePaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10)},"NG018.2":{name:"Jigawa South",revenueRequired:[3e9,325e7,35e8,375e7],revenueBilled:[275e7,3e9,325e7,38e8],collections:[215e7,23e8,245e7,26e8],vendorCollections:{"BuyPower.ng":15,"Banahim.net":25,Bank:35,Cash:45,POS:15,"powershop.ng":25,Remita:20},dailyPostPaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10),dailyPrePaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10)},"NG020.1":{name:"Kano Central",revenueRequired:[1e9,12e8,13e8,14e8],revenueBilled:[95e7,1e9,105e7,15e8],collections:[7e8,73e7,76e7,79e7],vendorCollections:{"BuyPower.ng":20,"Banahim.net":30,Bank:40,Cash:50,POS:20,"powershop.ng":30,Remita:25},dailyPostPaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10),dailyPrePaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10)},"NG020.2":{name:"Kano South",revenueRequired:[1e9,12e8,13e8,14e8],revenueBilled:[95e7,1e9,105e7,15e8],collections:[7e8,73e7,76e7,79e7],vendorCollections:{"BuyPower.ng":18,"Banahim.net":28,Bank:38,Cash:48,POS:18,"powershop.ng":28,Remita:23},dailyPostPaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10),dailyPrePaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10)},"NG020.3":{name:"Kano North",revenueRequired:[1e9,12e8,13e8,14e8],revenueBilled:[95e7,1e9,105e7,15e8],collections:[7e8,73e7,76e7,79e7],vendorCollections:{"BuyPower.ng":22,"Banahim.net":32,Bank:42,Cash:52,POS:22,"powershop.ng":32,Remita:27},dailyPostPaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10),dailyPrePaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10)},"NG020.4":{name:"Kano Industrial",revenueRequired:[1e9,12e8,13e8,14e8],revenueBilled:[95e7,1e9,105e7,15e8],collections:[7e8,73e7,76e7,79e7],vendorCollections:{"BuyPower.ng":25,"Banahim.net":35,Bank:45,Cash:55,POS:25,"powershop.ng":35,Remita:30},dailyPostPaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10),dailyPrePaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10)},"NG020.5":{name:"Kano East",revenueRequired:[1e9,12e8,13e8,14e8],revenueBilled:[95e7,1e9,105e7,15e8],collections:[7e8,73e7,76e7,79e7],vendorCollections:{"BuyPower.ng":19,"Banahim.net":29,Bank:39,Cash:49,POS:19,"powershop.ng":29,Remita:24},dailyPostPaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10),dailyPrePaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10)},"NG021.1":{name:"Katsina South",revenueRequired:[2e9,22e8,24e8,26e8],revenueBilled:[18e8,19e8,2e9,27e8],collections:[135e7,145e7,155e7,165e7],vendorCollections:{"BuyPower.ng":14,"Banahim.net":24,Bank:34,Cash:44,POS:14,"powershop.ng":24,Remita:19},dailyPostPaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10),dailyPrePaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10)},"NG021.2":{name:"Katsina Central",revenueRequired:[2e9,22e8,24e8,26e8],revenueBilled:[18e8,19e8,2e9,27e8],collections:[135e7,145e7,155e7,165e7],vendorCollections:{"BuyPower.ng":16,"Banahim.net":26,Bank:36,Cash:46,POS:16,"powershop.ng":26,Remita:21},dailyPostPaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10),dailyPrePaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10)},"NG021.3":{name:"Katsina North",revenueRequired:[2e9,22e8,24e8,26e8],revenueBilled:[18e8,19e8,2e9,27e8],collections:[135e7,145e7,155e7,165e7],vendorCollections:{"BuyPower.ng":12,"Banahim.net":22,Bank:32,Cash:42,POS:12,"powershop.ng":22,Remita:17},dailyPostPaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10),dailyPrePaidCollections:Array.from({length:31},()=>Math.floor(Math.random()*50)+10)}},K={"NG018.1":{name:"Jigawa North",expenses:[{label:"Administrative Expenses",amount:15e7,trend:"up"},{label:"Technical Expenses",amount:57e8,trend:"down"},{label:"Petrol Costs",amount:75e7,trend:"up"},{label:"General Repairs",amount:405e6,trend:"down"},{label:"Salaries",amount:6e8,trend:"down"},{label:"Cables/Fuses & Breakers",amount:15e8,trend:"up"},{label:"Complaint Resolutions",amount:57e8,trend:"down"}]},"NG018.2":{name:"Jigawa South",expenses:[{label:"Administrative Expenses",amount:2e9,trend:"up"},{label:"Technical Expenses",amount:47e8,trend:"down"},{label:"Petrol Costs",amount:85e7,trend:"up"},{label:"General Repairs",amount:505e6,trend:"down"},{label:"Salaries",amount:7e8,trend:"down"},{label:"Cables/Fuses & Breakers",amount:2e9,trend:"up"},{label:"Complaint Resolutions",amount:47e8,trend:"down"}]},"NG020.1":{name:"Kano Central",expenses:[{label:"Administrative Expenses",amount:18e8,trend:"up"},{label:"Technical Expenses",amount:55e8,trend:"down"},{label:"Petrol Costs",amount:9e8,trend:"up"},{label:"General Repairs",amount:45e7,trend:"down"},{label:"Salaries",amount:65e7,trend:"down"},{label:"Cables/Fuses & Breakers",amount:18e8,trend:"up"},{label:"Complaint Resolutions",amount:55e8,trend:"down"}]},"NG020.2":{name:"Kano South",expenses:[{label:"Administrative Expenses",amount:1e9,trend:"up"},{label:"Technical Expenses",amount:3e9,trend:"down"},{label:"Petrol Costs",amount:45e7,trend:"up"},{label:"General Repairs",amount:25e7,trend:"down"},{label:"Salaries",amount:35e7,trend:"down"},{label:"Cables/Fuses & Breakers",amount:1e9,trend:"up"},{label:"Complaint Resolutions",amount:3e9,trend:"down"}]},"NG020.3":{name:"Kano North",expenses:[{label:"Administrative Expenses",amount:22e8,trend:"up"},{label:"Technical Expenses",amount:6e9,trend:"down"},{label:"Petrol Costs",amount:95e7,trend:"up"},{label:"General Repairs",amount:505e6,trend:"down"},{label:"Salaries",amount:75e7,trend:"down"},{label:"Cables/Fuses & Breakers",amount:2e9,trend:"up"},{label:"Complaint Resolutions",amount:6e9,trend:"down"}]},"NG020.4":{name:"Kano Industrial",expenses:[{label:"Administrative Expenses",amount:25e8,trend:"up"},{label:"Technical Expenses",amount:7e9,trend:"down"},{label:"Petrol Costs",amount:1e9,trend:"up"},{label:"General Repairs",amount:55e7,trend:"down"},{label:"Salaries",amount:8e8,trend:"down"},{label:"Cables/Fuses & Breakers",amount:22e8,trend:"up"},{label:"Complaint Resolutions",amount:7e9,trend:"down"}]},"NG020.5":{name:"Kano East",expenses:[{label:"Administrative Expenses",amount:19e8,trend:"up"},{label:"Technical Expenses",amount:65e8,trend:"down"},{label:"Petrol Costs",amount:85e7,trend:"up"},{label:"General Repairs",amount:505e6,trend:"down"},{label:"Salaries",amount:7e8,trend:"down"},{label:"Cables/Fuses & Breakers",amount:19e8,trend:"up"},{label:"Complaint Resolutions",amount:65e8,trend:"down"}]},"NG021.1":{name:"Katsina South",expenses:[{label:"Administrative Expenses",amount:21e8,trend:"up"},{label:"Technical Expenses",amount:57e8,trend:"down"},{label:"Petrol Costs",amount:8e8,trend:"up"},{label:"General Repairs",amount:6e8,trend:"down"},{label:"Salaries",amount:5e8,trend:"down"},{label:"Cables/Fuses & Breakers",amount:18e8,trend:"up"},{label:"Complaint Resolutions",amount:57e8,trend:"down"}]},"NG021.2":{name:"Katsina Central",expenses:[{label:"Administrative Expenses",amount:25e8,trend:"up"},{label:"Technical Expenses",amount:67e8,trend:"down"},{label:"Petrol Costs",amount:95e7,trend:"up"},{label:"General Repairs",amount:55e7,trend:"down"},{label:"Salaries",amount:6e8,trend:"down"},{label:"Cables/Fuses & Breakers",amount:2e9,trend:"up"},{label:"Complaint Resolutions",amount:67e8,trend:"down"}]},"NG021.3":{name:"Katsina North",expenses:[{label:"Administrative Expenses",amount:23e8,trend:"up"},{label:"Technical Expenses",amount:62e8,trend:"down"},{label:"Petrol Costs",amount:9e8,trend:"up"},{label:"General Repairs",amount:5e8,trend:"down"},{label:"Salaries",amount:55e7,trend:"down"},{label:"Cables/Fuses & Breakers",amount:19e8,trend:"up"},{label:"Complaint Resolutions",amount:62e8,trend:"down"}]}},J={NG018:{name:"Jigawa",businessDistricts:{"NG018.1":{name:"Jigawa North",costs:{"NBET Invoice":21e8,"MO Invoice":31e8,Salaries:19e8,"Disco Opex":25e7,Others:4e8}},"NG018.2":{name:"Jigawa South",costs:{"NBET Invoice":21e8,"MO Invoice":31e8,Salaries:19e8,"Disco Opex":25e7,Others:4e8}}}},NG020:{name:"Kano",businessDistricts:{"NG020.1":{name:"Kano Central",costs:{"NBET Invoice":1e9,"MO Invoice":14e8,Salaries:9e8,"Disco Opex":12e7,Others:2e8}},"NG020.2":{name:"Kano South",costs:{"NBET Invoice":1e9,"MO Invoice":14e8,Salaries:9e8,"Disco Opex":12e7,Others:2e8}},"NG020.3":{name:"Kano North",costs:{"NBET Invoice":1e9,"MO Invoice":14e8,Salaries:9e8,"Disco Opex":12e7,Others:2e8}},"NG020.4":{name:"Kano Industrial",costs:{"NBET Invoice":1e9,"MO Invoice":14e8,Salaries:9e8,"Disco Opex":12e7,Others:2e8}},"NG020.5":{name:"Kano East",costs:{"NBET Invoice":1e9,"MO Invoice":14e8,Salaries:9e8,"Disco Opex":12e7,Others:2e8}}}},NG021:{name:"Katsina",businessDistricts:{"NG021.1":{name:"Katsina South",costs:{"NBET Invoice":1166e6,"MO Invoice":1833e6,Salaries:1e9,"Disco Opex":1333e5,Others:2333e5}},"NG021.2":{name:"Katsina Central",costs:{"NBET Invoice":1166e6,"MO Invoice":1833e6,Salaries:1e9,"Disco Opex":1333e5,Others:2333e5}},"NG021.3":{name:"Katsina North",costs:{"NBET Invoice":1166e6,"MO Invoice":1833e6,Salaries:1e9,"Disco Opex":1333e5,Others:2333e5}}}}},O={NG018:{name:"Jigawa",businessDistricts:{"NG018.1":{name:"Jigawa North",tariffs:[55,60,50,25],energyDelivered:100},"NG018.2":{name:"Jigawa South",tariffs:[50,55,45,20],energyDelivered:80}}},NG020:{name:"Kano",businessDistricts:{"NG020.1":{name:"Kano Central",tariffs:[60,65,50,30],energyDelivered:120},"NG020.2":{name:"Kano South",tariffs:[55,60,45,25],energyDelivered:100},"NG020.3":{name:"Kano North",tariffs:[50,55,40,20],energyDelivered:110},"NG020.4":{name:"Kano Industrial",tariffs:[70,75,60,35],energyDelivered:130},"NG020.5":{name:"Kano East",tariffs:[65,70,55,30],energyDelivered:90}}},NG021:{name:"Katsina",businessDistricts:{"NG021.1":{name:"Katsina South",tariffs:[55,60,50,25],energyDelivered:70},"NG021.2":{name:"Katsina Central",tariffs:[50,55,45,20],energyDelivered:60},"NG021.3":{name:"Katsina North",tariffs:[45,50,40,15],energyDelivered:50}}}};F.accessToken="pk.eyJ1IjoiZHZvLXJlZ2lzIiwiYSI6ImNseXNsdzYzZTBsMTYycnM2bXY5dDh2M2sifQ.w7XKnvlxVxtWiYIFEVbz2g";const V=({selectedBusinessDistrict:t,onBusinessDistrictClick:r})=>{const[a,i]=y.useState(null),c=j(),s=c.palette.primary.main,l=y.useRef(null),d=y.useRef(null),h=8.582,f=12.075;return y.useEffect(()=>{if(!d.current){console.log("Initializing map...");const o=new F.Map({container:l.current,style:"mapbox://styles/dvo-regis/clyssb5i7002301pc2fajh6kt",center:[h,f],zoom:6.6});d.current=o,d.current.scrollZoom.disable(),o.touchZoomRotate.enable(),o.touchZoomRotate.enableRotation(),o.dragRotate.enable(),o.boxZoom.enable(),o.keyboard.enable(),o.on("load",()=>{console.log("Map loaded"),o.addSource("states",{type:"geojson",data:"/assets/map-data/KEDCBUSINESSDISTRICTS.geojson"}),o.addLayer({id:"states-layer",type:"fill",source:"states",paint:{"fill-color":"#888888","fill-opacity":.5}}),o.on("click","states-layer",u=>{if(console.log("Map clicked",u),u.features.length>0){const n=u.features[0],p=n.properties.BusinessDistrict1Pcod;if(console.log("Selected feature",n),p){const S=b[p]||{name:"Unknown",revenueRequired:[0,0,0,0],revenueBilled:[0,0,0,0],collections:[0,0,0,0]};i(S),r(S.name),o.setPaintProperty("states-layer","fill-color",["case",["==",["get","BusinessDistrict1Pcod"],p],s,"#888888"])}else console.error("Selected property code is undefined")}}),o.on("mouseenter","states-layer",()=>{o.getCanvas().style.cursor="pointer"}),o.on("mouseleave","states-layer",()=>{o.getCanvas().style.cursor=""})})}return()=>{console.log("Cleaning up map initialization effect")}},[c,s,r]),y.useEffect(()=>{if(!d.current)return;console.log("Updating map layer for selectedBusinessDistrict:",t);const o=d.current,u=()=>{const n=Object.keys(b).find(p=>b[p].name===t);n?(console.log("Setting fill color for selectedPcod:",n),o.setPaintProperty("states-layer","fill-color",["case",["==",["get","BusinessDistrict1Pcod"],n],s,"#888888"])):(console.log("Resetting fill color"),o.setPaintProperty("states-layer","fill-color","#888888"))};o.isStyleLoaded()?u():o.once("styledata",u)},[t,s]),y.useEffect(()=>{if(console.log("Selected business district changed:",t),t){const o=Object.values(b).find(u=>u.name===t);i(o),console.log("District data:",o)}else i(null)},[t]),e.jsx(N,{title:"Financial Breakdown By Business District",subtitle:"Select a business district",children:e.jsxs(m,{container:!0,spacing:3,children:[e.jsx(m,{item:!0,xs:12,children:e.jsx(x,{className:"rounded-bars",bgcolor:"#f7f8f9",height:350,ref:l})}),a&&e.jsxs(e.Fragment,{children:[e.jsx(m,{item:!0,xs:12,sm:4,children:e.jsx(M,{title:"Total Cost",value:`â‚¦${a.revenueRequired[a.revenueRequired.length-1].toLocaleString()}`,chartData:a.revenueRequired,stateName:a.name})}),e.jsx(m,{item:!0,xs:12,sm:4,children:e.jsx(M,{title:"Revenue Billed",value:`â‚¦${a.revenueBilled[a.revenueBilled.length-1].toLocaleString()}`,chartData:a.revenueBilled,stateName:a.name})}),e.jsx(m,{item:!0,xs:12,sm:4,children:e.jsx(M,{title:"Collections",value:`â‚¦${a.collections[a.collections.length-1].toLocaleString()}`,chartData:a.collections,stateName:a.name})})]})]})})},H=()=>{const t={"NBET Invoice":0,"MO Invoice":0,Salaries:0,"Disco Opex":0,Others:0};return Object.values(J).forEach(r=>{Object.values(r.businessDistricts).forEach(a=>{Object.keys(a.costs).forEach(i=>{t[i]+=a.costs[i]||0})})}),t},X=({selectedBusinessDistrict:t})=>{const r=j(),a=t?Object.values(J).flatMap(n=>Object.values(n.businessDistricts)).find(n=>n.name===t):null,i=a?a.costs:H(),c=Object.values(i).reduce((n,p)=>n+p,0),s=Object.keys(i),l=s.map(n=>i[n]),d=n=>n>=1e9?`â‚¦${(n/1e9).toFixed(1)}B`:`â‚¦${n/1e6}M`,f=(n=>n.map(p=>{const S=p.split(" ");return S.length>1?S:[p]}))(s),o={chart:{type:"bar",fontFamily:"'Plus Jakarta Sans', sans-serif;",foreColor:"#adb0bb",toolbar:{show:!1},height:200,width:"100%"},colors:["#0074BA","#02B7FA","#ABC4C9","#000","#B3CEE6"],plotOptions:{bar:{borderRadius:3,columnWidth:"60%",barHeight:"60%",distributed:!0,endingShape:"rounded",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:n=>d(n),position:"top",style:{fontSize:"10px",colors:["#304758"],fontWeight:700},offsetY:-20},legend:{show:!1},grid:{padding:{top:0,right:0,bottom:0,left:0},show:!1},xaxis:{categories:f,axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!0}},yaxis:{labels:{show:!1}},tooltip:{theme:r.palette.mode==="dark"?"dark":"light",y:{formatter:function(n){return d(n)}}}},u=[{name:"",data:l}];return e.jsx(k,{children:e.jsxs(v,{sx:{p:"30px"},children:[e.jsxs(C,{direction:"row",spacing:2,justifyContent:"space-between",children:[e.jsx(g,{variant:"h5",children:"Cost And Breakdown By Business District"}),e.jsx(x,{display:"flex",alignItems:"left",children:e.jsx(w,{label:t||"All districts",size:"small"})})]}),e.jsx(C,{direction:"row",spacing:3,mb:3,mt:3,children:s.map((n,p)=>e.jsxs(C,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(E,{sx:{width:9,height:9,bgcolor:o.colors[p],svg:{display:"none"}}}),e.jsx(x,{children:e.jsx(g,{variant:"subtitle2",fontSize:"12px",fontWeight:700,color:"textSecondary",children:n})})]},p))}),e.jsx(m,{container:!0,spacing:3,mt:2,children:["August","July","June","May"].map((n,p)=>e.jsx(m,{item:!0,xs:12,sm:3,children:e.jsx(k,{children:e.jsxs(v,{sx:{p:"20px"},children:[e.jsx(x,{children:e.jsx(B,{options:o,series:u,type:"bar",height:"190px"})}),e.jsxs(x,{mt:2,children:[e.jsx(g,{variant:"h6",fontWeight:400,mb:1,children:n}),e.jsxs(C,{direction:"row",spacing:2,justifyContent:"space-between",children:[e.jsx(g,{variant:"h4",children:d(c)}),e.jsx(g,{variant:"subtitle1",color:"success.main",children:"+2.5%"})]})]})]})})},p))})]})})},_=()=>{const t={"MYTO Tariff":{sum:0,count:0},"Billing Tariff":{sum:0,count:0},"Collection Tariff":{sum:0,count:0},"Tariff Loss":{sum:0,count:0}};return Object.values(O).forEach(r=>{Object.values(r.businessDistricts).forEach(a=>{t["MYTO Tariff"].sum+=a.tariffs[0]||0,t["MYTO Tariff"].count+=1,t["Billing Tariff"].sum+=a.tariffs[1]||0,t["Billing Tariff"].count+=1,t["Collection Tariff"].sum+=a.tariffs[2]||0,t["Collection Tariff"].count+=1,t["Tariff Loss"].sum+=a.tariffs[3]||0,t["Tariff Loss"].count+=1})}),{"MYTO Tariff":t["MYTO Tariff"].sum/t["MYTO Tariff"].count,"Billing Tariff":t["Billing Tariff"].sum/t["Billing Tariff"].count,"Collection Tariff":t["Collection Tariff"].sum/t["Collection Tariff"].count,"Tariff Loss":t["Tariff Loss"].sum/t["Tariff Loss"].count}},U=t=>{if(t){const[i,c]=t.split("."),s=O[i];return s&&s.businessDistricts[c]?s.businessDistricts[c].tariffs[2]:0}const r=Object.values(O).reduce((i,c)=>i+Object.values(c.businessDistricts).reduce((s,l)=>s+l.energyDelivered,0),0);return Object.values(O).reduce((i,c)=>i+Object.values(c.businessDistricts).reduce((s,l)=>s+l.tariffs[2]*l.energyDelivered,0),0)/r},R=t=>`â‚¦${t.toFixed(0)} /kWh`,Q=t=>t.map(r=>{const a=r.split(" ");return a.length>1?a:[r]}),ee=({selectedBusinessDistrict:t})=>{var u;const r=j(),[a,i]=t?t.split("."):[],c=a&&i?(u=O[a])==null?void 0:u.businessDistricts[i]:null,s=c?c.tariffs:Object.values(_()),l=["MYTO Tariff","Billing Tariff","Collection Tariff","Tariff Loss"],d=Q(l),h={chart:{type:"bar",fontFamily:"'Plus Jakarta Sans', sans-serif;",foreColor:"#adb0bb",toolbar:{show:!1},height:200,width:"100%"},colors:["#0074BA","#B3CEE6","#000","#ABC4C9"],plotOptions:{bar:{borderRadius:3,columnWidth:"60%",barHeight:"60%",distributed:!0,endingShape:"rounded",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:n=>R(n),position:"top",style:{fontSize:"10px",colors:["#304758"],fontWeight:700},offsetY:-20},legend:{show:!1},grid:{padding:{top:0,right:0,bottom:0,left:0},show:!1},xaxis:{categories:d,axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!0}},yaxis:{labels:{show:!1}},tooltip:{theme:r.palette.mode==="dark"?"dark":"light",y:{formatter:function(n){return R(n)}}}},f=[{name:"",data:s}],o=U(t);return e.jsx(k,{children:e.jsxs(v,{sx:{p:"30px"},children:[e.jsxs(C,{direction:"row",spacing:2,justifyContent:"space-between",children:[e.jsx(g,{variant:"h5",children:"Tariff Breakdown By Business District"}),e.jsx(x,{display:"flex",alignItems:"left",children:e.jsx(w,{label:t||"All districts",size:"small"})})]}),e.jsx(C,{direction:"row",spacing:3,mb:3,mt:3,children:l.map((n,p)=>e.jsxs(C,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(E,{sx:{width:9,height:9,bgcolor:h.colors[p],svg:{display:"none"}}}),e.jsx(x,{children:e.jsx(g,{variant:"subtitle2",fontSize:"12px",fontWeight:700,color:"textSecondary",children:n})})]},p))}),e.jsx(m,{container:!0,spacing:3,mt:2,children:["August","July","June","May"].map((n,p)=>e.jsx(m,{item:!0,xs:12,sm:3,children:e.jsx(k,{children:e.jsxs(v,{sx:{p:"20px"},children:[e.jsx(x,{children:e.jsx(B,{options:h,series:f,type:"bar",height:"190px"})}),e.jsxs(x,{mt:2,children:[e.jsx(g,{variant:"h6",fontWeight:400,mb:1,children:n}),e.jsxs(C,{direction:"row",spacing:2,justifyContent:"space-between",children:[e.jsx(g,{variant:"h5",children:R(o)}),e.jsx(g,{variant:"subtitle1",color:"success.main",children:"+2.5%"})]})]})]})})},p))})]})})},P=q($)(({theme:t})=>({borderRadius:0,"&:first-of-type":{borderTopLeftRadius:t.shape.borderRadius,borderBottomLeftRadius:t.shape.borderRadius},"&:last-of-type":{borderTopRightRadius:t.shape.borderRadius,borderBottomRightRadius:t.shape.borderRadius},"&:not(:first-of-type)":{marginLeft:"-1px"}})),L=({onFilterChange:t,selectedState:r,selectedBusinessDistrict:a})=>{const[i,c]=y.useState(r),[s,l]=y.useState(a);y.useEffect(()=>{c(r),console.log("Selected state updated in filter:",r)},[r]),y.useEffect(()=>{l(a),console.log("Selected business district updated in filter:",a)},[a]);const d=u=>{const n=i===u?"":u;c(n),t(n),console.log("State button clicked:",u,"New state:",n)},h=u=>{const n=s===u?"":u;l(n),t(n),console.log("Business district button clicked:",u,"New business district:",n)},f=e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:i==="Kano"?"contained":"outlined",onClick:()=>d("Kano"),children:"Kano"}),e.jsx(P,{variant:i==="Katsina"?"contained":"outlined",onClick:()=>d("Katsina"),children:"Katsina"}),e.jsx(P,{variant:i==="Jigawa"?"contained":"outlined",onClick:()=>d("Jigawa"),children:"Jigawa"})]}),o={Kano:["Kano Central","Kano East","Kano Industrial","Kano North","Kano South"],Katsina:["Katsina Central","Katsina North","Katsina South"],Jigawa:["Jigawa North","Jigawa South"]};return e.jsx(C,{direction:"row",children:i?e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"contained",onClick:()=>d(i),children:i}),o[i].map(u=>e.jsx(P,{variant:s===u?"contained":"outlined",onClick:()=>h(u),children:u},u))]}):f})};L.propTypes={onFilterChange:D.func.isRequired,selectedState:D.string.isRequired,selectedBusinessDistrict:D.string.isRequired};const I=t=>t>=1e9?`â‚¦${(t/1e9).toFixed(1)}B`:`â‚¦${(t/1e6).toFixed(1)}M`,te=({selectedBusinessDistrict:t})=>{var c;console.log("Selected Business District: ",t);const r=t?((c=Object.values(K).find(s=>s.name===t))==null?void 0:c.expenses)||[]:Object.values(K).flatMap(s=>s.expenses);console.log("Expenses before aggregation: ",r);const a=r.reduce((s,l)=>{const d=s.find(h=>h.label===l.label);return d?d.amount+=l.amount:s.push({...l}),s},[]);console.log("Aggregated Expenses: ",a);const i=Array(3).fill({label:"Other Expenses",amount:0,trend:"down"});return e.jsx(Z,{elevation:0,sx:{backgroundColor:"#f2f5f6",py:0,boxShadow:"rgb(145 158 171 / 30%) 0px 0px 2px 0px, rgb(145 158 171 / 12%) 0px 12px 24px -4px"},children:e.jsxs(v,{sx:{py:2,px:2},children:[e.jsxs(x,{mb:4,mt:3,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[e.jsx(g,{mb:2,variant:"h4",children:"Opex Breakdown"}),e.jsx(w,{alignItems:"right",label:t||"All business districts",size:"small"})]}),e.jsx(C,{spacing:2,justifyContent:"space-between",direction:"row",divider:e.jsx(T,{sx:{borderColor:"#959697"},orientation:"vertical",flexItem:!0}),alignItems:"center",children:a.slice(0,5).map((s,l)=>e.jsxs(x,{sx:{textAlign:"center",width:"20%"},children:[e.jsxs(g,{variant:"h2",whiteSpace:"nowrap",children:[I(s.amount)," ",e.jsx("span",{children:s.trend==="up"?e.jsx(A,{width:18,color:"#39B69A"}):e.jsx(G,{width:18,color:"#b63939"})})]}),e.jsx(g,{mt:2,variant:"subtitle1",whiteSpace:"nowrap",children:s.label})]},l))}),e.jsx(T,{sx:{borderColor:"#cdd2da",marginTop:"20px",marginBottom:"20px"},orientation:"horizontal",flexItem:!0}),e.jsx(C,{spacing:2,justifyContent:"space-between",direction:"row",divider:e.jsx(T,{sx:{borderColor:"#959697"},orientation:"vertical",flexItem:!0}),alignItems:"center",children:a.slice(5).concat(i).map((s,l)=>e.jsxs(x,{sx:{textAlign:"center",width:"20%"},children:[e.jsxs(g,{variant:"h2",whiteSpace:"nowrap",children:[I(s.amount)," ",e.jsx("span",{children:s.trend==="up"?e.jsx(A,{width:18,color:"#39B69A"}):e.jsx(G,{width:18,color:"#b63939"})})]}),e.jsx(g,{mt:2,variant:"subtitle1",whiteSpace:"nowrap",children:s.label})]},l))})]})})},ae=({selectedBusinessDistrict:t})=>{const r=j(),i=(f=>Object.keys(b).find(o=>b[o].name===f))(t),c=i?b[i]:null,s=c?Object.values(c.vendorCollections):Object.values(b).reduce((f,o)=>(Object.entries(o.vendorCollections).forEach(([u,n])=>{f[u]=(f[u]||0)+n}),f),{}),l=c?c.name:"All business districts",d={chart:{type:"bar",fontFamily:"'Plus Jakarta Sans', sans-serif",foreColor:"#4d5561",fontSize:"11px",toolbar:{show:!1},height:330},colors:["#a2c1c5"],plotOptions:{bar:{borderRadius:0,columnWidth:"50%",distributed:!0,endingShape:"rounded",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:f=>`â‚¦${f}M`,position:"top",offsetY:-20,style:{fontSize:"11px",fontWeight:700,colors:["#4d5561"]},background:"#fff"},legend:{show:!1},grid:{borderColor:"rgba(0,0,0,0.1)",strokeDashArray:3,xaxis:{lines:{show:!1}}},yaxis:{min:0,tickAmount:4},xaxis:{categories:Object.keys(c?c.vendorCollections:s),labels:{rotate:0},axisBorder:{show:!1}},tooltip:{theme:r.palette.mode==="dark"?"dark":"light",fillSeriesColor:!1}},h=[{name:"Daily Collections",data:Object.values(s)}];return y.useEffect(()=>{},[t,h]),e.jsx(N,{title:"Collections By Vendors (â‚¦)",subtitle:"",action:e.jsx(x,{display:"flex",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{label:l,size:"small"})}),children:e.jsx(m,{container:!0,spacing:3,children:e.jsx(m,{item:!0,xs:12,children:e.jsx(x,{mt:2,children:e.jsx(B,{options:d,series:h,type:"bar",height:"350px"})})})})})},se=t=>{const r=Array.from({length:31},()=>0);return Object.values(b).forEach(a=>{(t==="postpaid"?a.dailyPostPaidCollections:a.dailyPrePaidCollections).forEach((c,s)=>{r[s]+=c})}),r},ne=({selectedBusinessDistrict:t})=>{const r=j(),a=r.palette.primary.main,i=r.palette.secondary.main,c=t?Object.values(b).find(h=>h.name===t):null,s=c?c.dailyPostPaidCollections:se("postpaid"),l={chart:{type:"area",fontFamily:"'Plus Jakarta Sans', sans-serif",foreColor:"#adb0bb",toolbar:{show:!1},height:370},fill:{type:"gradient",gradient:{shadeIntensity:1,inverseColors:!1,opacityFrom:.6,opacityTo:.1,stops:[0,100],colorStops:[{offset:0,color:a,opacity:.3},{offset:100,color:i,opacity:0}]}},stroke:{curve:"smooth",width:2},dataLabels:{enabled:!0,formatter:h=>`â‚¦${h}M`,position:"top",offsetY:-10,style:{fontSize:"10px",fontWeight:700,colors:["#3b78a7"]},background:"#fff"},legend:{show:!1},grid:{borderColor:"rgba(0,0,0,0.1)",strokeDashArray:3,xaxis:{lines:{show:!1}}},yaxis:{min:0,tickAmount:4},xaxis:{categories:Array.from({length:31},(h,f)=>[`${f+1}`]),labels:{rotate:0},axisBorder:{show:!1}},tooltip:{theme:r.palette.mode==="dark"?"dark":"light",fillSeriesColor:!1}},d=[{name:"Daily Post-Paid Collections",data:s}];return e.jsx(N,{title:"Daily Collections Post-Paid (â‚¦)",subtitle:"",action:e.jsx(x,{display:"flex",alignItems:"left",children:e.jsx(w,{label:t||"All business districts",size:"small"})}),children:e.jsx(m,{container:!0,spacing:3,children:e.jsx(m,{item:!0,xs:12,children:e.jsx(x,{className:"rounded-bars",children:e.jsx(B,{options:l,series:d,type:"area",height:"390px"})})})})})},oe=t=>{const r=Array.from({length:31},()=>0);return Object.values(b).forEach(a=>{(t==="postpaid"?a.dailyPostPaidCollections:a.dailyPrePaidCollections).forEach((c,s)=>{r[s]+=c})}),r},re=({selectedBusinessDistrict:t})=>{const r=j(),a=r.palette.primary.main,i=r.palette.secondary.main,c=t?Object.values(b).find(h=>h.name===t):null,s=c?c.dailyPrePaidCollections:oe("prepaid"),l={chart:{type:"area",fontFamily:"'Plus Jakarta Sans', sans-serif",foreColor:"#adb0bb",toolbar:{show:!1},height:370},fill:{type:"gradient",gradient:{shadeIntensity:1,inverseColors:!1,opacityFrom:.6,opacityTo:.1,stops:[0,100],colorStops:[{offset:0,color:a,opacity:.3},{offset:100,color:i,opacity:0}]}},stroke:{curve:"smooth",width:2},dataLabels:{enabled:!0,formatter:h=>`â‚¦${h}M`,position:"top",offsetY:-10,style:{fontSize:"10px",fontWeight:700,colors:["#3b78a7"]},background:"#fff"},legend:{show:!1},grid:{borderColor:"rgba(0,0,0,0.1)",strokeDashArray:3,xaxis:{lines:{show:!1}}},yaxis:{min:0,tickAmount:4},xaxis:{categories:Array.from({length:31},(h,f)=>[`${f+1}`]),labels:{rotate:0},axisBorder:{show:!1}},tooltip:{theme:r.palette.mode==="dark"?"dark":"light",fillSeriesColor:!1}},d=[{name:"Daily Pre-Paid Collections",data:s}];return e.jsx(N,{title:"Daily Collections Pre-Paid (â‚¦)",subtitle:"",action:e.jsx(x,{display:"flex",alignItems:"left",children:e.jsx(w,{label:t||"All business districts",size:"small"})}),children:e.jsx(m,{container:!0,spacing:3,children:e.jsx(m,{item:!0,xs:12,children:e.jsx(x,{className:"rounded-bars",children:e.jsx(B,{options:l,series:d,type:"area",height:"390px"})})})})})},ie=[{to:"/",title:"Home"},{title:"State"},{title:"Financial By Business District"}],Oe=()=>{const[t,r]=y.useState(""),[a,i]=y.useState(""),c=l=>{if(console.log("Filter change triggered:",l),l==="Kano"||l==="Katsina"||l==="Jigawa")r(l),i("");else{i(l);const d=Object.keys(b).find(h=>Object.keys(b[h].businessDistricts).includes(l));r(d),console.log("State set from business district:",d)}},s=l=>{console.log("Business district clicked on map:",l),i(l);const d=Object.keys(b).find(h=>Object.keys(b[h].businessDistricts).includes(l));r(d),console.log("State set from map click:",d)};return e.jsxs(W,{title:"Financial By Business District",description:"this is Charts page",children:[e.jsx(z,{title:"Financial By Business District",items:ie}),e.jsxs(m,{container:!0,spacing:3,children:[e.jsx(m,{item:!0,xs:12,children:e.jsx(L,{onFilterChange:c,selectedState:t,selectedBusinessDistrict:a})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(V,{selectedBusinessDistrict:a,onBusinessDistrictClick:s})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(re,{selectedBusinessDistrict:a})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(ne,{selectedBusinessDistrict:a})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(ae,{selectedBusinessDistrict:a})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(te,{selectedBusinessDistrict:a})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(X,{selectedBusinessDistrict:a})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(ee,{selectedBusinessDistrict:a})})]})]})};export{Oe as default};
